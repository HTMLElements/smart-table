
/* Smart UI v8.0.0 (2020-Aug) 
Copyright (c) 2011-2020 jQWidgets. 
License: https://htmlelements.com/license/ */ //

!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=67)}({67:function(e,t){Smart("smart-input",class extends Smart.BaseElement{static get properties(){return{autoCompleteDelay:{value:100,type:"number"},dataSource:{type:"any",value:[],reflectToAttribute:!1},dropDownDataSource:{type:"any",value:[]},dropDownHeight:{type:"any",value:200},dropDownWidth:{type:"any",value:null},dropDownButtonPosition:{allowedValues:["none","left","right"],value:"none",type:"string"},hint:{type:"string",value:""},inputPurpose:{type:"string",value:"off"},items:{type:"number",value:8},minLength:{type:"number",value:1},name:{value:"",type:"string"},opened:{value:!1,type:"boolean"},query:{type:"string",value:""},queryMode:{allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string",value:"containsIgnoreCase"},placeholder:{value:"",type:"string"},readonly:{type:"boolean",value:!1},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},type:{type:"string"},value:{type:"string",value:""}}}static get styleUrls(){return["smart.textbox.css"]}template(){return'<div id="inputContainer" role="presentation"><input class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\' value=\'{{value::keyup}}\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" /><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup"><div id="arrow" class="arrow" aria-hidden="true"></div></div></div>'}static get listeners(){return{"input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}focus(){this.$.input.focus()}select(){const e=this;e.readonly?e.$.input.focus():e.$.input.select()}_documentUpHandler(e){const t=this,r=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;r!==t&&r!==t.$.dropDownButton&&r!==t.$.input&&r!==t.$.arrow&&(t.$.scrollView.contains(r.shadowParent||r)?t._isPointerDown&&(t._isPointerDown=!1,t.opened&&(t._preventLookup=!0),t.$.input.focus()):(t.opened&&(t._preventLookup=!0),t._isPointerDown||t.close(),t._isPointerDown=!1))}_focusHandler(){const e=this;e.setAttribute("focus",""),e.readonly||0!==e.minLength||0!==e.$.input.value.length||e._preventLookup?(e.$.fireEvent("focus"),delete e._preventLookup):e._lookup()}_blurHandler(){const e=this;e.opened||e.removeAttribute("focus"),e.$.fireEvent("blur"),delete e._preventLookup}_refreshMenu(){const e=this;e.$.menu.classList.remove("scroll"),e.$.scrollView.computedVerticalScrollBarVisibility&&e.$.menu.classList.add("scroll")}_performSelect(){const e=this,t=e.$.menu.querySelector(".active"),r=t.getAttribute("data-label"),n=t.getAttribute("value"),o=e.value,a=e.$.input.dataValue;e.value=r,e.$.input.dataValue=n,e.setAttribute("data-value",e.$.input.dataValue),r===o&&n===a||e.$.fireEvent("change",{value:n,label:r,oldValue:a,oldLabel:o}),e.close()}_open(){const e=this;if(e.opened)return;const t=e.getBoundingClientRect(),r=window.scrollX,n=window.scrollY;let o=0,a=0;if(e.timer&&clearTimeout(e.timer),e.getRootNode()&&e.getRootNode().host?e.getRootNode().host.shadowRoot.appendChild(e.$.scrollView):document.body.appendChild(e.$.scrollView),e.setAttribute("aria-owns",e.$.scrollView.id),e.readonly||e.$.input.setAttribute("aria-controls",e.$.scrollView.id),e.$.scrollView.enableShadowDOM&&!e._importedStyle&&(e.$.scrollView.importStyle(e._getStyleUrl("smart.textbox.css")),e._importedStyle=!0),"static"!==getComputedStyle(document.body).position){const e=document.body.getBoundingClientRect();o=e.left,a=e.top}e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.scrollView.style.left=-3+t.left+r-o+"px",e.$.scrollView.style.top=t.bottom+n-a+1+"px",e.$.scrollView.classList.remove("open"),e.$.scrollView.onpointerdown=function(){e._isPointerDown=!0},requestAnimationFrame((function(){const t=e.dropDownWidth;if(e.$.scrollView.refresh&&e.$.scrollView.refresh(),e._refreshMenu(),e.$.scrollView.setAttribute("open",""),e.setAttribute("open",""),e.$.dropDownButton.setAttribute("open",""),e.$.input.setAttribute("open",""),t&&"string"==typeof t&&-1!==t.indexOf("%")){const r=parseFloat(t)/100;e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",e.offsetWidth*r+"px")}else if("auto"!==t&&t)e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",parseFloat(t)+"px");else if("auto"===t){if(e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.scrollView.$.scrollViewerContainer.classList.contains("vscroll")){const t=e.$.scrollView.offsetWidth+parseFloat(getComputedStyle(e.$.scrollView).getPropertyValue("--smart-scroll-bar-size"));e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",t+"px")}}else{e.$.menu.style.width="auto";let t=e.$.menu.offsetWidth;const r=e.$.menu.querySelectorAll("li");for(let t=0;t<r.length;t++)e._maxDropDownWidth=Math.max((r[t].firstElementChild||r[t]).offsetWidth,e._maxDropDownWidth);e.$.scrollView.computedVerticalScrollBarVisibility&&(t+=e.$.scrollView.$&&e.$.scrollView.$.verticalScrollBar?e.$.scrollView.$.verticalScrollBar.offsetWidth:30),e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",Math.max(t,e.offsetWidth-8)+"px"),e.$.menu.style.width=""}(e.shadowRoot||e.isInShadowDOM)&&e.$.scrollView._scrollView&&Smart.ScrollBar&&requestAnimationFrame(()=>e.$.scrollView._scrollView.vScrollBar.refresh())})),e.$.scrollView.refresh&&e.$.scrollView.refresh(),e._refreshMenu(),this.opened=!0,e.setAttribute("aria-expanded",!0)}close(){const e=this;return!!e.opened&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){e.$.scrollView.parentNode&&!e.opened&&(e.$.scrollView.remove(),e.removeAttribute("aria-owns"),e.readonly||e.$.input.removeAttribute("aria-controls"))}),1e3),e.$.scrollView.removeAttribute("open"),e.$.dropDownButton.removeAttribute("open"),e.$.input.removeAttribute("open"),e.removeAttribute("open"),e.opened=!1,e.setAttribute("aria-expanded",!1),e.$.input.focus(),!0)}_lookup(e){const t=this;let r=[];t.query=t.$.input.value,t.$.input.readonly&&(t._incrementalSearchQuery||(t._incrementalSearchQuery=""),t._incrementalSearchQuery+=e.key,t._incrementalSearchTimer&&clearTimeout(t._incrementalSearchTimer),t.query=t._incrementalSearchQuery,t._incrementalSearchTimer=setTimeout((function(){t._incrementalSearchQuery=""}),700)),t.query.length<t.minLength?t.close():(r="function"==typeof t.dataSource?t.dataSource(t.query):t.dataSource,clearTimeout(t._autoCompleteTimeout),t._autoCompleteTimeout=setTimeout((function(){const e=t.context;t.context=t,t._process(r),t.context=e}),t.autoCompleteDelay))}_downHandler(e){const t=this;t.readonly&&t._dropDownButtonDownHandler(e)}_dropDownButtonDownHandler(e){return this._toggle(),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}_toggle(){const e=this;e.opened?e.close():e.open()}open(){const e=this;let t;e.dropDownDataSource?(e.query="",t="function"==typeof e.dataSource?e.dataSource(e.query):e.dataSource):t="function"==typeof e.dropDownDataSource?e.dropDownDataSource(e.query):e.dropDownDataSource,e._process(t);const r=e.$.menu.querySelector(".active");if(r){const t=e.$.input.dataValue;for(let n=0;n<e.$.menu.children.length;n++){const o=e.$.menu.children[n],a=o.getAttribute("data-label"),i=o.getAttribute("value");if(void 0!==t&&i===t||void 0===t&&a===e.$.input.value){r.classList.remove("active"),o.classList.add("active"),e._setActiveDescendant(o),e.$.input.dataValue=i,e.setAttribute("data-value",i);break}}}e.ensureVisible(),e.$.input.focus(),setTimeout((function(){e.$.input.focus()}),25)}_process(e){const t=this;"string"==typeof e&&(e=t.$.deserialize(e,"array")),e=e.filter((function(e){return t.matcher?t.matcher(e):t._matcher(e)})),e=t._sorter(e),t.sorted&&(e.sort((e,t)=>void 0!==e.label?e.label.localeCompare(t.label):e.localeCompare(t)),"desc"===t.sortDirection&&e.reverse()),!e.length&&t.opened&&t.close(),0!==e.length&&(t.query.length>0?t._render(e.slice(0,t.items)):t._render(e),t._open(),t.$.scrollView.refresh&&t.$.scrollView.refresh(),t._refreshMenu(),t.ensureVisible())}_matcher(e){const t=this.query;switch(e=e.label||e,this.queryMode){case"startsWith":return e.startsWith(t);case"startsWithIgnoreCase":return e.toLowerCase().startsWith(t.toLowerCase());case"doesNotContain":return e.indexOf(t)<0;case"doesNotContainIgnoreCase":return e.toLowerCase().indexOf(t.toLowerCase())<0;case"contains":return e.indexOf(t)>-1;default:case"containsIgnoreCase":return~e.toLowerCase().indexOf(t.toLowerCase());case"equals":return 0===e.localeCompare(t);case"equalsIgnoreCase":return 0===e.toLowerCase().localeCompare(t.toLowerCase());case"endsWith":return e.endsWith(t);case"endsWithIgnoreCase":return e.toLowerCase().endsWith(t.toLowerCase())}}_sorter(e){const t=this;let r,n=[],o=[],a=[];for(;r=e.shift();){const e=r.label||r;e.toLowerCase().indexOf(t.query.toLowerCase())?~e.indexOf(t.query)?o.push(r):a.push(r):n.push(r)}return n.concat(o,a)}_highlighter(e){const t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),(function(e,t){return"<strong>"+t+"</strong>"}))}_render(e){const t=this,r=e.map((function(e){let r=e,n=e;"object"==typeof e&&(r=e.label,n=e.value||r);const o=document.createElement("li"),a=document.createElement("a");return a.href="#",o.id=t.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),o.setAttribute("data-label",r),o.setAttribute("value",n),o.setAttribute("role","option"),o.setAttribute("aria-label",r),a.innerHTML=t.highlighter?t.highlighter(r):t._highlighter(r),a.setAttribute("aria-hidden",!0),e.icon&&(a.classList.add("icon"),a.classList.add(e.icon)),o.appendChild(a),o}));function n(){const e=t.$.menu.getElementsByClassName("active");e[0]&&e[0].classList.remove("active"),this.classList.add("active"),t._setActiveDescendant(this)}r.length>0&&(r[0].classList.add("active"),t._setActiveDescendant(r[0])),t.$.menu.innerHTML="";for(let e=0;e<r.length;e++){const o=r[e];t.$.menu.appendChild(o),o.onmouseenter=n,o.onmouseleave=function(){this.classList.remove("active"),t._setActiveDescendant(null)},o.onclick=n}}ensureVisible(){const e=this,t=e.$.menu.querySelector(".active");t&&(t.offsetTop+t.offsetHeight>=e.$.scrollView.scrollTop+e.$.scrollView.offsetHeight&&(e.$.scrollView.scrollTop=t.offsetTop+t.offsetHeight),(t.offsetTop<=e.$.scrollView.scrollTop||t.offsetTop>=e.$.scrollView.scrollTop+e.$.scrollView.offsetHeight)&&(e.$.scrollView.scrollTop=t.offsetTop),0===[...e.$.menu.children].indexOf(t)?e.$.scrollView.scrollTop=0:[...e.$.menu.children].indexOf(t)===e.$.menu.children.length-1&&(e.$.scrollView.scrollTop=e.$.scrollView.scrollHeight))}_next(){const e=this,t=e.$.menu.querySelector(".active");if(!t){const t=e.$.menu.firstElementChild;return t.classList.add("active"),void e._setActiveDescendant(t)}t.classList.remove("active");let r=t.nextElementSibling;r||(r=e.$.menu.firstElementChild),r.classList.add("active"),e._setActiveDescendant(r),e.ensureVisible()}_prev(){const e=this,t=e.$.menu.querySelector(".active");if(!t){const t=e.$.menu.firstElementChild;return t.classList.add("active"),void e._setActiveDescendant(t)}t.classList.remove("active");let r=t.previousElementSibling;r||(r=e.$.menu.lastElementChild),r.classList.add("active"),e._setActiveDescendant(r),e.ensureVisible()}_move(e){const t=this;if(t.opened){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),t._prev();break;case 40:e.preventDefault(),t._next()}e.stopPropagation()}}_keyDownHandler(e){this._suppressKeyPressRepeat=![40,38,9,13,27,16,17,18].includes(e.keyCode),e.shiftKey||e.altKey||e.ctrlKey||this._move(e)}_keyPressHandler(e){this._suppressKeyPressRepeat||e.shiftKey||e.altKey||e.ctrlKey||this._move(e)}_keyUpHandler(e){const t=this;if(!e.shiftKey)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 9:case 13:if(!t.opened)return;t._performSelect(),e.stopPropagation(),e.preventDefault();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault();break;default:t._lookup(e),!t.opened||e.ctrlKey||e.shiftKey||(e.stopPropagation(),e.preventDefault()),t.$.input.dataValue=t.$.input.value,t.setAttribute("data-value",t.$.input.dataValue)}}propertyChangedHandler(e,t,r){super.propertyChangedHandler(e,t,r);const n=this;if("dropDownHeight"===e)"auto"!==n.dropDownHeight?n.$.scrollView.style.setProperty("--smart-input-drop-down-menu-height",n.dropDownHeight+"px"):n.$.scrollView.style.setProperty("--smart-input-drop-down-menu-height","auto");else if("opened"===e)n.opened=t,r?n.open():n.close();else if("placeholder"===e){if(n.readonly){const e=n.getAttribute("aria-label");if(e&&e!==t)return;r?n.setAttribute("aria-label",r):n.removeAttribute("aria-label")}}else"value"===e?n.displayMember!==n.valueMember&&"string"!=typeof r?(n.value=r[n.displayMember],n.$.input.dataValue=r[n.valueMember],n.setAttribute("data-value",n.$.input.dataValue)):n.$.input.value=r:"readonly"===e?(n._setAriaRelations(),n._setInputPurpose()):"theme"===e||"rightToLeft"===e?n.$.scrollView[e]=r:"inputPurpose"===e?n._setInputPurpose():"inverted"===e?r?n.$.scrollView.setAttribute("inverted",""):n.$.scrollView.removeAttribute("inverted"):"disabled"!==e&&"unfocusable"!==e||n._setFocusable()}render(){const e=this;e.hint||(e.hint=e.placeholder),e._createElement&&e._createElement(),e.opened&&(e.opened=!1,e.open());const t=e.$.scrollView,r=e.$.menu;r&&(r.setAttribute("role","presentation"),t.appendChild(r)),"auto"!==e.dropDownHeight?t.style.setProperty("--smart-input-drop-down-menu-height",e.dropDownHeight+"px"):t.style.setProperty("--smart-input-drop-down-menu-height","auto"),t.classList.add("smart-input-drop-down-menu"),t.id=e.id+"_"+e.tagName.toLowerCase()+"_menu_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),t.ownerElement=e,e._setAriaRelations(),e._setInputPurpose(),super.render()}_createElement(){const e=this,t=document.createElement("ul"),r=document.createElement("smart-scroll-viewer");r.rightToLeft=e.rightToLeft,r.theme=e.theme,r.horizontalScrollBarVisibility="hidden",e.inverted?r.setAttribute("inverted",""):r.removeAttribute("inverted"),e.$.scrollView=r,e.$.menu=t,e._setFocusable(),e.$.menu.onclick=function(t){t.stopPropagation(),t.preventDefault(),e._performSelect(),e.$.input.focus()}}_setAriaRelations(){const e=this,t=e.getAttribute("aria-label");e.readonly?(e.setAttribute("role","button"),!t&&e.placeholder&&e.setAttribute("aria-label",e.placeholder),e.removeAttribute("aria-readonly"),e.$.input.setAttribute("aria-hidden",!0),e.$.input.removeAttribute("aria-activedescendant"),e.$.input.removeAttribute("aria-controls"),e.$.dropDownButton.setAttribute("aria-hidden",!0)):(e.setAttribute("role","combobox"),t&&t===e.placeholder&&e.removeAttribute("aria-label"),e.$.input.setAttribute("role","searchbox"),e.$.input.removeAttribute("aria-hidden",!0),e.$.dropDownButton.removeAttribute("aria-hidden")),e.setAttribute("aria-expanded",e.opened),e.setAttribute("aria-haspopup","listbox"),e.$.scrollView.setAttribute("role","listbox")}_setActiveDescendant(e){const t=this;t.readonly||(e?t.setAttribute("aria-activedescendant",e.id):t.removeAttribute("aria-activedescendant"))}_setInputPurpose(){const e=this;e.readonly?e.$.input.removeAttribute("autocomplete"):e.$.input.setAttribute("autocomplete",e.inputPurpose)}_setFocusable(){const e=this;e.disabled||e.unfocusable?e.$.input.setAttribute("tabindex",-1):e.$.input.removeAttribute("tabindex")}}),Smart("smart-text-area",class extends Smart.Input{template(){return'<div id="inputContainer" role="presentation"><textarea class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\'  name=\'[[name]]\' value=\'{{value::keyup}}\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]"></textarea><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup"><div id="arrow" class="arrow" aria-hidden="true"></div></div></div>'}render(){super.render(),this.classList.add("smart-input")}}),Smart("smart-number-input",class extends Smart.Input{template(){return'<div id="inputContainer" role="presentation"><input class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\' value=\'{{value::keyup}}\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" /><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="nav smart-drop-down-button" role="button" aria-label="Toggle popup"></div></div>'}static get properties(){return{formatSettings:{value:{style:"currency",currencySign:"accounting",currencyDisplay:"code",currency:"USD"},type:"any"},min:{value:0,type:"number"},max:{value:9999999999,type:"number"},step:{value:1,type:"number"},value:{value:0,type:"any"}}}getFormattedValue(e,t){return null===t?parseFloat(e):new Intl.NumberFormat(this.locale,t).format(""+e)}render(){const e=this;super.render(),e.classList.add("smart-input");const t=e.$.input,r=document.createElement("div"),n=document.createElement("div");t.value=e.getFormattedValue(Math.min(Math.max(e.min,e.value),e.max),e.formatSettings),r.tabIndex=n.tabIndex=-1,t.classList.add("smart-input"),r.classList.add("up"),n.classList.add("down");const o=function(r){if("keydown"!==r.type);else{let n=t.value.toString(),o=1.1;o=o.toLocaleString().substring(1,2);const s=n.indexOf(o);if(r.keyCode>=65&&r.keyCode<=90)return r.stopPropagation(),void r.preventDefault();if(" "===r.key)return r.stopPropagation(),void r.preventDefault();if("-"===r.key){const e=a();return i(-e),r.stopPropagation(),void r.preventDefault()}switch(r.key){case"'":case'"':case"/":case"\\":case"`":case"=":case"(":case")":return r.stopPropagation(),void r.preventDefault()}if(","===r.key&&","!==o||"."===r.key&&"."!==o)return r.stopPropagation(),void r.preventDefault();const l=[...n];let u=l[t.selectionStart];if(r.key===o){if(-1===e.getFormattedValue(a(),e.formatSettings).indexOf(o))return r.stopPropagation(),void r.preventDefault();if(s>=0)return r.stopPropagation(),r.preventDefault(),void(t.selectionStart=t.selectionEnd=s+1)}else if(r.keyCode>=48&&r.keyCode<=57&&t.selectionStart<s&&t.selectionEnd-t.selectionStart<=1){if(isNaN(parseInt(u)))for(let e=t.selectionStart;e<l.length;e++){let r=parseInt(l[e]);if(!isNaN(r)){t.selectionStart=t.selectionEnd=e;break}}}else{if(s>=0&&t.selectionStart>s&&r.keyCode>=48&&r.keyCode<=57){const n=t.selectionStart,i=e.getFormattedValue(a(),e.formatSettings);let l=0;if(i&&-1!==i.indexOf(o))for(let e=i.indexOf(o);e<i.length;e++){!isNaN(parseInt(i.substring(e,e+1)))&&l++}let u=t.value.toString();return u=u.substring(0,t.selectionStart)+r.key.toString()+u.substring(t.selectionStart+1),u.substring(s+1,s+1+l).length<=l&&t.selectionStart<=s+l&&(t.value=u,t.selectionStart=t.selectionEnd=n+1),r.stopPropagation(),void r.preventDefault()}if("Backspace"===r.key||"Delete"===r.key){const n=t.selectionStart,i=s>=0&&t.selectionStart>s,l=e.getFormattedValue(a(),e.formatSettings);let u=0;if(l&&-1!==l.indexOf(o))for(let e=l.indexOf(o);e<l.length;e++){!isNaN(parseInt(l.substring(e,e+1)))&&u++}let c=t.value.toString(),d=!1;if("Delete"===r.key){c=c.substring(0,t.selectionStart)+"0"+c.substring(t.selectionStart+1);const e=c.substring(s+1,s+1+u);-1===c.indexOf(o)&&s>=0?(t.selectionStart=t.selectionEnd=n+1,d=!0):i&&e.length<=u&&(t.value=c,t.selectionStart=t.selectionEnd=n+1,d=!0)}else if("Backspace"===r.key){c=c.substring(0,t.selectionStart-1)+"0"+c.substring(t.selectionStart);const e=c.substring(s+1);-1===c.indexOf(o)&&s>=0?(t.selectionStart=t.selectionEnd=n-1,d=!0):i&&e.length<=u&&(t.value=c,t.selectionStart=t.selectionEnd=n-1,d=!0)}return void(d&&(r.stopPropagation(),r.preventDefault()))}}}};e.$.dropDownButton.appendChild(r),e.$.dropDownButton.appendChild(n),e.dropDownButtonPosition="right";const a=function(){let r=t.value.replace("%","").replace("$","").replace("€",""),n=12345.1;n=n.toLocaleString().substring(2,3);const o=new RegExp(n,"g");r=r.replace(o,"");let a=!1;r.indexOf("(")>=0&&(a=!0,r=r.replace("(","").replace(")",""));let i=[...r],s="";for(let e=0;e<i.length;e++){const t=i[e];switch(t){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":case".":case",":s+=t}}r=s;let l=parseFloat(r);return e.formatSettings&&e.formatSettings.style&&"percent"===e.formatSettings.style&&(l/=100),a&&(l=-l),isNaN(l)||l===1/0||l===-1/0?0:l};e.getValue=a;const i=function(r){const n=parseFloat(r);if("-"===r){const e=a();return i(-e),t.selectionStart=t.selectionEnd=1,void(t.selectionEnd=t.value.length)}if(!isNaN(n)){if(e.formatSettings){const n=e.getFormattedValue(r,e.formatSettings),o=isNaN(parseFloat(n.substring(0,1)))?1:0,a=r>0?0:1;t.value=n,t.selectionStart=t.selectionEnd=1+o+a}else t.value=n;"number"==typeof r&&(t.selectionStart=0,t.selectionEnd=t.value.length)}};e.setValue=i;this._attach=function(){t.addEventListener("keydown",o),r.onkeydown=o,n.onkeydown=o;const i=t=>{if(e.formatSettings){return e.getFormattedValue(t,e.formatSettings)}return t},s=function(e){e.interval&&clearInterval(e.interval),e.timer&&clearTimeout(e.timer),e.interval=e.timer=null,e.removeAttribute("active")},l=t=>{t.onmouseleave=t.onmouseup=()=>{s(t)},t.onpointerdown=()=>{e._captured=!0,t.timer=setTimeout(()=>{t.interval=setInterval(()=>{t.click(),t.setAttribute("active","")},50)},100)}};r.onclick=function(){const n=a();e._captured||s(r),isNaN(n)||(n<e.max||""===e.max)&&(t.value=i(Math.min(e.max,n+e.step)))},n.onclick=function(){const r=a();e._captured||s(n),isNaN(r)||(r>e.min||""===e.min)&&(t.value=i(Math.max(e.min,r-e.step)))},l(r),l(n)},e._detach=function(){t.removeEventListener("keydown",o),r.onclick=n.onclick=null,r.onkeydown=n.onkeydown=null}}_blurHandler(){super._blurHandler(),this.value=this.getFormattedValue(this.getValue(),this.formatSettings)}attached(){this._attach()}detached(){this._detach()}_documentUpHandler(e){this._captured=!1,super._documentUpHandler(e)}})}});